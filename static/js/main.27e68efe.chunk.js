(this.webpackJsonpfinance=this.webpackJsonpfinance||[]).push([[0],{104:function(e,t){},106:function(e,t){},128:function(e,t,a){},135:function(e,t,a){},246:function(e,t,a){"use strict";a.r(t);a(95),a(96);var n=a(36),l=(a(97),a(1)),s=a.n(l),r=a(11),o=a(8),c=a(3),i=a(21),u=a(14),m=a(23),d=a(22),h=(a(99),a(81)),p=a.n(h);var f,b="https://cloud.iexapis.com/v1";function g(e){return{transaction:e,type:"ADD_TRANSACTION"}}function y(e){return{pageSize:e,type:"CHANGE_PAGE_SIZE"}}function S(e){return{symbols:e,type:"DELETE_SYMBOLS"}}function E(){null!=f&&(clearTimeout(f),f=null)}function v(){return function(e,t){function a(){E(),setTimeout((function(){e(v())}),3e5)}if(0===t().symbols.length)return E(),void a();E(),e({type:"FETCH_QUOTES_REQUEST"}),fetch("".concat(b,"/stock/market/batch?types=quote&token=").concat(t().iexApiKey,"&symbols=").concat(encodeURIComponent(t().symbols.join(",")))).then((function(t){t.json().then((function(t){var a={};Object.keys(t).forEach((function(e){a[e]=t[e].quote})),e({quotes:a,type:"FETCH_QUOTES_SUCCESS"})})).catch((function(t){e({error:t,type:"FETCH_QUOTES_FAILURE"})}))})).catch((function(t){e({error:t,type:"FETCH_QUOTES_FAILURE"})})).finally((function(){a()}))}}function C(e){return function(t){t({type:"IMPORT_TRANSACTIONS_FILE_REQUEST"});var a=new FileReader;a.onerror=function(){t({type:"IMPORT_TRANSACTIONS_FILE_FAILURE"})},a.onload=function(){var e=p()(a.result,{columns:!0});t({transactions:e.map((function(e){return{cashValue:""===e["Cash value"]?null:parseFloat(e["Cash value"]),commission:parseFloat(e.Commission),date:e.Date,id:-1,notes:e.Notes,price:parseFloat(e.Price),shares:parseFloat(e.Shares),symbol:e.Symbol,type:e.Type}})),type:"ADD_TRANSACTIONS"}),t(v()),t({type:"IMPORT_TRANSACTIONS_FILE_SUCCESS"})},a.readAsText(e)}}var O=a(82),N=a.n(O);a(128);function x(e){return l.createElement("div",{className:"sk-folding-cube mr-3",title:e.title},l.createElement("div",{className:"sk-cube1 sk-cube"}),l.createElement("div",{className:"sk-cube2 sk-cube"}),l.createElement("div",{className:"sk-cube4 sk-cube"}),l.createElement("div",{className:"sk-cube3 sk-cube"}))}var T=a(9),A=a(2),I=a.n(A),j=new window.Intl.DateTimeFormat(void 0,{day:"numeric",hour:"numeric",hour12:!1,minute:"numeric",month:"numeric",second:"numeric",year:"numeric"});function F(e,t,a){var n=a.toUpperCase(),l=[];return t.some((function(t){return!(!t.symbol.startsWith(n)||(l.push(t),l.length!==e))})),l}function w(){}function _(e,t){var a=t.query,n=e.symbol.slice(0,a.length),s=e.symbol.slice(a.length);return l.createElement("span",null,l.createElement("strong",null,n),l.createElement("span",null,s)," - ",e.name)}function k(e){return e.symbol}var P=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSearchBlur=function(){n.setState({searchIsFocused:!1})},n.handleSearchFocus=function(){null==n.props.allIexSymbols&&n.props.dispatch((function(e,t){e({type:"FETCH_ALL_IEX_SYMBOLS_REQUEST"}),fetch("".concat(b,"/ref-data/symbols?token=").concat(t().iexApiKey)).then((function(t){t.json().then((function(t){e({allIexSymbols:t,type:"FETCH_ALL_IEX_SYMBOLS_SUCCESS"})})).catch((function(t){e({error:t,type:"FETCH_ALL_IEX_SYMBOLS_FAILURE"})}))})).catch((function(t){e({error:t,type:"FETCH_ALL_IEX_SYMBOLS_FAILURE"})}))})),n.setState({searchIsFocused:!0})},n.handleSearchQueryChange=function(e){"INPUT"===e.currentTarget.nodeName&&n.setSearchQuery(e.currentTarget.value)},n.handleSearchQueryClear=function(){n.setSearchQuery("")},n.handleSearchSubmit=function(e){e.preventDefault()},n.handleSetIexApiKey=function(e){e.preventDefault(),n.props.dispatch({iexApiKey:n.state.nextIexApiKey,type:"SET_IEX_API_KEY"}),n.closeActiveModal()},n.handleSuggestionSelected=function(e,t){var a=t.suggestionValue;n.props.history.push("/stocks/".concat(a))},n.closeActiveModal=function(){n.setState({activeModal:null})},n.openSettingsModal=function(){n.setState({activeModal:{type:"settings"},nextIexApiKey:null==n.props.iexApiKey?"":n.props.iexApiKey})},n.setNextIexApiKey=function(e){n.setState({nextIexApiKey:e.target.value})},n.toggle=function(){n.setState({isOpen:!n.state.isOpen})},n.state={activeModal:null,isOpen:!1,nextIexApiKey:"",searchIsFocused:!1,searchQuery:"",searchResults:[]},n}return Object(u.a)(a,[{key:"setSearchQuery",value:function(e){this.setState({searchQuery:e,searchResults:null==this.props.allIexSymbols?[]:F(5,this.props.allIexSymbols,e)})}},{key:"render",value:function(){var e=this.props,t=e.fetchErrorMessage,a=e.updatedAt;return l.createElement(c.n,{color:"dark",dark:!0,expand:"md"},l.createElement(c.o,{className:"text-warning",tag:r.c,to:"/"},"Finance!"),l.createElement(c.p,{onClick:this.toggle}),l.createElement(c.c,{isOpen:this.state.isOpen,navbar:!0},l.createElement(c.e,{action:"/finance/stocks",className:"mr-auto",inline:!0,onSubmit:this.handleSearchSubmit},l.createElement(N.a,{getSuggestionValue:k,highlightFirstSuggestion:!0,inputProps:{name:"symbol",onBlur:this.handleSearchBlur,onChange:this.handleSearchQueryChange,onFocus:this.handleSearchFocus,placeholder:"Search...",value:this.state.searchQuery},onSuggestionsClearRequested:this.handleSearchQueryClear,onSuggestionsFetchRequested:w,onSuggestionSelected:this.handleSuggestionSelected,renderSuggestion:_,suggestions:this.state.searchResults,theme:{container:"autosuggest",input:I()("dark-transition form-control",{"bg-dark":!this.state.searchIsFocused}),suggestionsContainer:"dropdown",suggestionsList:"dropdown-menu ".concat(this.state.searchResults.length>0?"show":""),suggestion:"dropdown-item",suggestionHighlighted:"active"}})),this.props.isLoading?l.createElement(x,{title:"Fetching new quotes...",type:"folding-cube"}):null,null==t?null:l.createElement("abbr",{className:"mr-1",title:"Error: ".concat(t)},l.createElement("span",{"aria-label":"Connection error",className:"text-danger",role:"img"},"\u26a0\ufe0f")),l.createElement("small",null,l.createElement("span",{className:"text-white-50"},"Quotes last fetched: "),null==a?l.createElement("span",{className:"text-white"},"never"):l.createElement("time",{className:"text-white",dateTime:new Date(a).toISOString()},j.format(a))),l.createElement(c.a,{className:"ml-2",onClick:this.openSettingsModal,size:"sm"},"Settings")),l.createElement(c.i,{isOpen:null!=this.state.activeModal&&"settings"===this.state.activeModal.type,toggle:this.closeActiveModal},l.createElement("form",{onSubmit:this.handleSetIexApiKey},l.createElement(c.j,null,l.createElement("div",{className:"form-group"},l.createElement("label",{htmlFor:"apiKey"},"IEX Publishable API Key"),l.createElement("input",{className:"form-control",id:"apiKey",name:"apiKey",onChange:this.setNextIexApiKey,placeholder:"pk_abc123\u2026",value:this.state.nextIexApiKey,required:!0}))),l.createElement(c.k,null,l.createElement(c.a,{color:"secondary",onClick:this.closeActiveModal,outline:!0,type:"button"},"Cancel"),l.createElement(c.a,{color:"primary",type:"submit"},"Save")))))}}]),a}(l.Component),D=Object(o.e)(Object(T.b)((function(e){return{allIexSymbols:e.allIexSymbols,fetchErrorMessage:e.fetchErrorMessage,iexApiKey:e.iexApiKey,isLoading:e.isFetchingCount>0,updatedAt:e.updatedAt}}))(P)),L=a(32),H=new window.Intl.NumberFormat(void 0,{maximumFractionDigits:2}),R=["","K","M","B","T"],M={format(e,t){if(null===e||0===e)return"0";t=!t||t<0?0:t;var a=e.toPrecision(2).split("e"),n=1===a.length?0:Math.floor(Math.min(parseInt(a[1].slice(1),10),14)/3),l=(n<0?n:Math.abs(n))<1?e.toFixed(0+t):(e/Math.pow(10,3*n)).toFixed(1+t);return"".concat(H.format(l)).concat(R[n])}},U=new window.Intl.NumberFormat(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),z=new window.Intl.NumberFormat(void 0,{maximumFractionDigits:3,minimumFractionDigits:3}),q=new window.Intl.NumberFormat(void 0,{maximumFractionDigits:2,minimumFractionDigits:2,style:"percent"}),B=a(90),K=a(85),Q=a.n(K);function V(e){var t=l.useState(!1),a=Object(B.a)(t,2),n=a[0],s=a[1],r=l.useRef(null);return l.createElement("div",{className:"card"},l.createElement("div",{className:"card-body"},l.createElement(c.e,{action:"/api",method:"post",onSubmit:function(t){t.preventDefault();var a=Q()(t.currentTarget,{hash:!0});e.onAddSymbol&&e.onAddSymbol(a),null!=r.current&&r.current.reset()},innerRef:r},l.createElement(c.f,null,l.createElement(c.h,{for:"symbol"},"Symbol"),l.createElement(c.g,{autoComplete:"off",bsSize:"sm",id:"symbol",name:"symbol",required:!0})),n?l.createElement(c.f,null,l.createElement(c.a,{color:"link",onClick:function(){s(!1)},size:"sm",type:"button"},"- Remove transaction data")):l.createElement(c.f,null,l.createElement(c.a,{color:"link",onClick:function(){s(!0)},size:"sm",type:"button"},"+ Add transaction data")),l.createElement(c.c,{isOpen:n},l.createElement(c.f,null,l.createElement(c.h,{for:"type"},"Type"),l.createElement(c.g,{bsSize:"sm",className:"form-control",disabled:!n,id:"type",name:"type",required:!0,type:"select"},l.createElement("option",null,"Buy"),l.createElement("option",null,"Sell"))),l.createElement(c.f,null,l.createElement(c.h,{for:"shares"},"Shares"),l.createElement(c.g,{bsSize:"sm",disabled:!n,id:"shares",min:"0",name:"shares",required:!0,step:".001",type:"number"})),l.createElement(c.f,null,l.createElement(c.h,{for:"price"},"Price/Amount"),l.createElement(c.g,{bsSize:"sm",disabled:!n,id:"price",min:"0",name:"price",step:".01",type:"number"})),l.createElement(c.f,null,l.createElement(c.h,{for:"date"},"Date ",l.createElement("small",{className:"text-secondary"},"(Optional)")),l.createElement(c.g,{bsSize:"sm",disabled:!n,id:"date",name:"date",type:"date"})),l.createElement(c.f,null,l.createElement(c.h,{for:"commission"},"Commission ",l.createElement("small",{className:"text-secondary"},"(Optional)")),l.createElement(c.g,{bsSize:"sm",disabled:!n,id:"commission",min:"0",name:"commission",step:".01",type:"number"}))),l.createElement(c.f,{style:{marginBottom:0}},l.createElement(c.a,{color:"primary",disabled:e.isLoading,size:"sm",type:"submit"},"Add to portfolio")))))}function Y(e){return l.createElement(c.b,{className:"text-right"},l.createElement(c.a,{color:"link",size:"sm",type:"button"},l.createElement(c.h,{className:"label-button"},l.createElement(c.g,{accept:"text/csv",hidden:!0,onChange:function(t){var a=t.currentTarget,n=a.files;null!=n&&0!==n.length&&(e.onImportPortfolio(n[0]),a.value="")},type:"file"}),"Import transactions")),"|",l.createElement(c.a,{color:"link",onClick:e.onDeletePortfolio,size:"sm",type:"button"},"Delete portfolio"),"|",l.createElement(c.a,{color:"link",onClick:e.onDownloadPortfolio,size:"sm",type:"button"},"Download to spreadsheet"))}a(135);function G(){return l.createElement("div",{className:"bg-light shadow-sm nav-scroller"},l.createElement(c.l,{className:"nav-portfolio",role:"navigation"},l.createElement(c.m,null,l.createElement(r.c,{className:"nav-link",exact:!0,to:"/"},"Overview")),l.createElement(c.m,null,l.createElement(r.c,{className:"nav-link",to:"/performance"},"Performance")),l.createElement(c.m,null,l.createElement(r.c,{className:"nav-link",to:"/transactions"},"Transactions"))))}var X=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).handleAddSymbol=function(t){var a={cashValue:null,commission:parseFloat(t.commission)||0,date:t.date,id:-1,notes:null,price:parseFloat(t.price)||0,shares:parseFloat(t.shares)||0,symbol:t.symbol.toUpperCase(),type:t.type||"Buy"};e.props.dispatch(g(a)),e.props.dispatch(v())},e.handleDeletePortfolio=function(){window.confirm("Are you sure you want to delete the entire portfolio? This is irreversible.")&&e.props.dispatch({type:"DELETE_PORTFOLIO"})},e.handleDownloadPortfolio=function(){e.props.dispatch({type:"DOWNLOAD_PORTFOLIO"})},e.handleImportPortfolio=function(t){e.props.dispatch(C(t))},e}return Object(u.a)(a,[{key:"render",value:function(){return l.createElement(l.Fragment,null,l.createElement(G,null),l.createElement(c.d,{className:"mb-4"},l.createElement(c.q,{className:"mb-3 mt-3"},l.createElement(c.b,null,l.createElement(c.a,{color:this.props.deleteDisabled?"secondary":"danger",disabled:this.props.deleteDisabled,onClick:this.props.onDelete,outline:!0,size:"sm"},"Delete")),l.createElement(Y,{onDeletePortfolio:this.handleDeletePortfolio,onDownloadPortfolio:this.handleDownloadPortfolio,onImportPortfolio:this.handleImportPortfolio})),this.props.children,l.createElement(c.q,null,l.createElement(c.b,{md:"6"},l.createElement(V,{isLoading:this.props.isLoading,onAddSymbol:this.handleAddSymbol})))))}}]),a}(l.Component),W=Object(T.b)((function(e){return{isLoading:e.isFetchingCount>0}}))(X),J=a(35),Z=a(34),$=a.n(Z),ee=$()(J.a);function te(e){return I()("text-right",{"text-danger":null!=e&&e<0,"text-success":null!=e&&e>=0})}var ae=[{accessor:"companyName",Cell:function(e){return null==e.value?"...":e.value},Footer:l.createElement("strong",null,"Portfolio value:"),Header:"Name",headerClassName:"text-left"},{accessor:"symbol",Cell:function(e){return l.createElement(r.b,{to:"/stocks/".concat(e.value)},e.value)},Header:"Symbol",headerClassName:"text-left"},{accessor:"latestPrice",Cell:function(e){return l.createElement("div",{className:"text-right"},null==e.value?"...":U.format(e.value))},Header:"Last Price",headerClassName:"text-right"},{accessor:"change.change",Cell:function(e){var t=e.original.change;return l.createElement("div",{className:te(e.value)},null==t.change?"...":"".concat(t.change>=0?"+":"").concat(U.format(t.change)," (").concat(t.changePercent>=0?"+":"").concat(q.format(t.changePercent),")"))},Header:"Change",headerClassName:"text-right"},{accessor:"marketCap",Cell:function(e){return l.createElement("div",{className:"text-right"},null==e.value?"...":M.format(e.value))},Header:"Mkt. Cap",headerClassName:"text-right"},{accessor:"latestVolume",Cell:function(e){return l.createElement("div",{className:"text-right"},null==e.value?"...":M.format(e.value))},Header:"Volume",headerClassName:"text-right"},{accessor:"open",Cell:function(e){return l.createElement("div",{className:"text-right"},null==e.value?"...":U.format(e.value))},Header:"Open",headerClassName:"text-right"},{accessor:"high",Cell:function(e){return l.createElement("div",{className:"text-right"},null==e.value?"...":U.format(e.value))},Header:"High",headerClassName:"text-right"},{accessor:"low",Cell:function(e){return l.createElement("div",{className:"text-right"},null==e.value?"...":U.format(e.value))},Header:"Low",headerClassName:"text-right"},{accessor:"daysGain",Cell:function(e){return l.createElement("div",{className:te(e.value)},null==e.value?"...":"".concat(e.value>=0?"+":"").concat(U.format(e.value)))},Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.daysGain}),0);return l.createElement("div",{className:te(t)},t>=0?"+":"",U.format(t))},Header:"Day's gain",headerClassName:"text-right"}],ne=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleDeleteSelectedSymbols=function(){n.props.dispatch(S(Array.from(n.state.selectedSymbols)))},n.handlePageSizeChange=function(e){n.props.dispatch(y(e))},n.handleToggleAllSymbols=function(e){n.isAllSymbolsSelected()?n.setState({selectedSymbols:new Set}):n.setState({selectedSymbols:new Set(n.props.symbols)})},n.handleToggleSymbolSelected=function(e){n.isSymbolSelected(e)?n.state.selectedSymbols.delete(e):n.state.selectedSymbols.add(e),n.forceUpdate()},n.isAllSymbolsSelected=function(){return n.state.selectedSymbols.size===n.props.symbols.length},n.isSymbolSelected=function(e){return n.state.selectedSymbols.has(e)},n.state={selectedSymbols:new Set},n}return Object(u.a)(a,null,[{key:"getDerivedStateFromProps",value:function(e,t){var a,n=!1,l=new Set(e.symbols),s=new Set,r=Object(L.a)(t.selectedSymbols);try{for(r.s();!(a=r.n()).done;){var o=a.value;l.has(o)?s.add(o):n=!0}}catch(c){r.e(c)}finally{r.f()}return n?{selectedSymbols:s}:null}}]),Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.symbols.map((function(t){var a=e.props.quotes[t],n=e.props.transactions.filter((function(e){return e.symbol===t})).reduce((function(e,t){return e+t.shares}),0);return{change:{change:null==a?null:a.change,changePercent:null==a?null:a.changePercent},companyName:null==a?null:a.companyName,daysGain:null==a||0===n?null:a.change*n,high:null==a?null:a.high,latestPrice:null==a?null:a.latestPrice,latestVolume:null==a?null:a.latestVolume,low:null==a?null:a.low,marketCap:null==a?null:a.marketCap,open:null==a?null:a.open,symbol:t}})),a=0===this.props.symbols.length||0===this.state.selectedSymbols.size;return l.createElement(W,{deleteDisabled:a,onDelete:this.handleDeleteSelectedSymbols},l.createElement(c.q,{className:"mb-4"},l.createElement(c.b,null,l.createElement(ee,{columns:ae,data:t,defaultSorted:[{desc:!1,id:"symbol"}],getPaginationProps:function(){return{className:"pt-2",NextComponent:function(e){return l.createElement(c.a,Object.assign({className:"btn-sm",outline:!0},e))},PreviousComponent:function(e){return l.createElement(c.a,Object.assign({className:"btn-sm",outline:!0},e))},showPageJump:!1}},isSelected:this.isSymbolSelected,keyField:"symbol",noDataText:"No symbols yet. Add one using the form below.",onPageSizeChange:this.handlePageSizeChange,pageSize:this.props.appSettings.pageSize,selectAll:this.isAllSymbolsSelected(),selectType:"checkbox",toggleAll:this.handleToggleAllSymbols,toggleSelection:this.handleToggleSymbolSelected}))))}}]),a}(l.Component),le=Object(T.b)((function(e){return{appSettings:e.appSettings,quotes:e.quotes,symbols:e.symbols,transactions:e.transactions}}))(ne),se=$()(J.a);function re(e){return I()("text-right",{"text-danger":null!=e&&e<0,"text-success":null!=e&&e>=0})}var oe=[{accessor:"companyName",Cell:function(e){return null==e.value?"...":e.value},Footer:l.createElement("strong",null,"Portfolio value:"),Header:"Name",headerClassName:"text-left"},{accessor:"symbol",Cell:function(e){return l.createElement(r.b,{to:"/stocks/".concat(e.value)},e.value)},Header:"Symbol",headerClassName:"text-left"},{accessor:"latestPrice",Cell:function(e){return l.createElement("div",{className:"text-right"},null==e.value?"...":U.format(e.value))},Header:"Last Price",headerClassName:"text-right"},{accessor:"change.change",Cell:function(e){var t=e.original.change;return l.createElement("div",{className:re(e.value)},null==t.change?"...":"".concat(t.change>=0?"+":"").concat(U.format(t.change)," (").concat(t.changePercent>=0?"+":"").concat(q.format(t.changePercent),")"))},Header:"Change",headerClassName:"text-right"},{accessor:"shares",Cell:function(e){return l.createElement("div",{className:"text-right"},0===e.value?"...":z.format(e.value))},Header:"Shares",headerClassName:"text-right"},{accessor:"costBasis",Cell:function(e){return l.createElement("div",{className:"text-right"},null==e.value?"...":U.format(e.value))},Header:"Cost Basis",headerClassName:"text-right",Footer:function(e){return l.createElement("div",{className:"text-right"},U.format(e.data.reduce((function(e,t){return e+t.costBasis}),0)))}},{accessor:"marketValue",Cell:function(e){return l.createElement("div",{className:"text-right"},null==e.value?"...":U.format(e.value))},Header:"Mkt. Value",headerClassName:"text-right",Footer:function(e){return l.createElement("div",{className:"text-right"},U.format(e.data.reduce((function(e,t){return e+t.marketValue}),0)))}},{accessor:"gain",Cell:function(e){return l.createElement("div",{className:re(e.value)},null==e.value?"...":"".concat(e.value>=0?"+":"").concat(U.format(e.value)))},Header:"Gain",headerClassName:"text-right",Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.costBasis}),0);return l.createElement("div",{className:re(t)},t>=0?"+":"",U.format(t))}},{accessor:"gainPercent",Cell:function(e){return l.createElement("div",{className:re(e.value)},null==e.value?"...":"".concat(e.value>=0?"+":"").concat(q.format(e.value)))},Header:"Gain %",headerClassName:"text-right",Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.costBasis}),0),a=e.data.reduce((function(e,t){return e+t.marketValue}),0),n=0===a?0:(a-t)/t;return l.createElement("div",{className:re(n)},t>=0?"+":"",q.format(n))}},{accessor:"daysGain",Cell:function(e){return l.createElement("div",{className:re(e.value)},null==e.value?"...":"".concat(e.value>=0?"+":"").concat(U.format(e.value)))},Footer:function(e){var t=e.data.reduce((function(e,t){return e+t.daysGain}),0);return l.createElement("div",{className:re(t)},t>=0?"+":"",U.format(t))},Header:"Day's gain",headerClassName:"text-right"}],ce=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleDeleteSelectedSymbols=function(){n.props.dispatch(S(Array.from(n.state.selectedSymbols)))},n.handlePageSizeChange=function(e){n.props.dispatch(y(e))},n.handleToggleAllSymbols=function(e){n.isAllSymbolsSelected()?n.setState({selectedSymbols:new Set}):n.setState({selectedSymbols:new Set(n.props.symbols)})},n.handleToggleSymbolSelected=function(e){n.isSymbolSelected(e)?n.state.selectedSymbols.delete(e):n.state.selectedSymbols.add(e),n.forceUpdate()},n.isAllSymbolsSelected=function(){return n.state.selectedSymbols.size===n.props.symbols.length},n.isSymbolSelected=function(e){return n.state.selectedSymbols.has(e)},n.state={selectedSymbols:new Set},n}return Object(u.a)(a,null,[{key:"getDerivedStateFromProps",value:function(e,t){var a,n=!1,l=new Set(e.symbols),s=new Set,r=Object(L.a)(t.selectedSymbols);try{for(r.s();!(a=r.n()).done;){var o=a.value;l.has(o)?s.add(o):n=!0}}catch(c){r.e(c)}finally{r.f()}return n?{selectedSymbols:s}:null}}]),Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.symbols.map((function(t){var a=e.props.quotes[t],n=e.props.transactions.filter((function(e){return e.symbol===t})),l=0,s=0,r=0;n.forEach((function(e){"Buy"===e.type&&(l+=e.price*e.shares,l+=e.commission,r+=e.shares,null!=a&&(s+=a.latestPrice*e.shares))}));var o=s-l,c=0;null!=a&&(c=o/l);var i=r>0&&null!=a;return{change:{change:null==a?null:a.change,changePercent:null==a?null:a.changePercent},companyName:null==a?null:a.companyName,costBasis:i?l:null,daysGain:null==a||0===r?null:a.change*r,gain:i?o:null,gainPercent:i?c:null,latestPrice:null==a?null:a.latestPrice,marketValue:i?s:null,shares:r,symbol:t}})),a=0===this.props.symbols.length||0===this.state.selectedSymbols.size;return l.createElement(W,{deleteDisabled:a,onDelete:this.handleDeleteSelectedSymbols},l.createElement(c.q,{className:"mb-4"},l.createElement(c.b,null,l.createElement(se,{columns:oe,data:t,defaultSorted:[{desc:!1,id:"symbol"}],getPaginationProps:function(){return{NextComponent:function(e){return l.createElement(c.a,Object.assign({className:"btn-sm",outline:!0},e))},PreviousComponent:function(e){return l.createElement(c.a,Object.assign({className:"btn-sm",outline:!0},e))},className:"pt-2",showPageJump:!1}},isSelected:this.isSymbolSelected,keyField:"symbol",noDataText:"No symbols yet. Add one using the form below.",onPageSizeChange:this.handlePageSizeChange,pageSize:this.props.appSettings.pageSize,selectAll:this.isAllSymbolsSelected(),selectType:"checkbox",toggleAll:this.handleToggleAllSymbols,toggleSelection:this.handleToggleSymbolSelected}))))}}]),a}(l.Component),ie=Object(T.b)((function(e){return{appSettings:e.appSettings,quotes:e.quotes,symbols:e.symbols,transactions:e.transactions}}))(ce),ue=a(63),me=a(5),de=a(62),he=a(55),pe=a(25),fe=a(86),be=new window.Intl.NumberFormat(void 0);function ge(e){var t=e.title,a=e.value;return l.createElement("li",{className:"d-flex justify-content-between border-bottom py-2"},l.createElement("span",null,t),l.createElement("strong",null,a))}var ye=function(e){return new Date(e.date)},Se=function(e){return e.close},Ee=20,ve=50,Ce=635-ve-0,Oe=400-Ee-40;function Ne(e){var t,a,n=e.match,s=Object(T.c)(),r=Object(T.d)((function(e){return e.charts[n.params.symbol]})),o=Object(T.d)((function(e){return e.quotes[n.params.symbol]}));if(l.useEffect((function(){var e;s((e=n.params.symbol,function(t,a){t({type:"FETCH_SYMBOL_DATA_REQUEST"}),fetch("".concat(b,"/stock/").concat(e,"/batch?types=chart,quote&range=1y&token=").concat(a().iexApiKey)).then((function(a){a.json().then((function(a){t({symbol:e,symbolData:a,type:"FETCH_SYMBOL_DATA_SUCCESS"})})).catch((function(e){t({error:e,type:"FETCH_SYMBOL_DATA_FAILURE"})}))})).catch((function(e){t({error:e,type:"FETCH_SYMBOL_DATA_FAILURE"})}))}))}),[s,n.params.symbol]),null!=r){var i=Object(me.d)(r,Se)/2;t=Object(de.scaleTime)({range:[0,Ce],domain:Object(me.e)(r,ye)}),a=Object(de.scaleLinear)({range:[Oe,0],domain:[Object(me.g)(r,Se)-i,Object(me.f)(r,Se)+i]})}return l.createElement(c.d,{className:"mb-3 mt-3"},l.createElement("h2",null,null==o?"...":o.companyName," (",n.params.symbol,")"),l.createElement("h3",null,l.createElement("small",null,null==o?"...":o.latestPrice)," ",l.createElement("span",{className:I()({"text-danger":null!=o&&o.change<0,"text-success":null!=o&&o.change>=0})},null==o?"...":"".concat(o.change>=0?"+":"").concat(U.format(o.change)," (").concat(o.changePercent>=0?"+":"").concat(q.format(o.changePercent),")"))),l.createElement(c.q,{className:"mt-4"},l.createElement(c.b,{className:"border-top border-top-lg pt-2",md:"4"},l.createElement("h4",{className:"mb-3"},"Summary"),l.createElement("ul",{className:"list-unstyled"},l.createElement(ge,{title:"Volume",value:null==o?"...":be.format(o.latestVolume)}),l.createElement(ge,{title:"Avg Daily Volume",value:null==o?"...":be.format(o.avgTotalVolume)}),l.createElement(ge,{title:"Previous Close",value:null==o?"...":U.format(o.previousClose)}),l.createElement(ge,{title:"52-week Range",value:null==o?"...":"".concat(U.format(o.week52Low),"\u2013").concat(U.format(o.week52High))}),l.createElement(ge,{title:"Mkt. Cap",value:null==o?"...":M.format(o.marketCap)}),l.createElement(ge,{title:"P/E Ratio",value:null==o||null==o.peRatio?"...":z.format(o.peRatio)}))),l.createElement(c.b,{className:"border-top border-top-lg pt-2",md:{offset:1,size:7}},l.createElement("h4",{className:"mb-3"},"History"),null==r?l.createElement("div",{className:"text-center",style:{backgroundColor:"#343a40",borderRadius:"0.25rem",color:"#fff",height:"".concat(400,"px"),lineHeight:"".concat(400,"px")}},"Loading..."):l.createElement("svg",{width:635,height:400},l.createElement("rect",{x:0,y:0,width:635,height:400,fill:"#343a40",rx:"0.25rem"}),l.createElement(fe.LinearGradient,{id:"gradient"},l.createElement("stop",{offset:"0%",stopColor:"#ffc107",stopOpacity:1}),l.createElement("stop",{offset:"100%",stopColor:"#ffc107",stopOpacity:.2})),l.createElement(pe.Group,{top:Ee,left:ve},l.createElement(he.AreaClosed,{data:r,xScale:t,yScale:a,x:ye,y:Se,fill:"url(#gradient)",stroke:""}),l.createElement(ue.AxisLeft,{left:0,scale:a,stroke:"rgba(255,255,255,0.3)",top:0,tickLabelProps:function(e,t){return{dx:"-0.25em",dy:"0.25em",textAnchor:"end",fontFamily:"Arial",fontSize:10,fill:"rgba(255,255,255,0.9)"}},tickStroke:"rgba(255,255,255,0.3)",tickTextFill:"rgba(255,255,255,0.3)"}),l.createElement(ue.AxisBottom,{scale:t,stroke:"rgba(255,255,255,0.3)",top:Oe,tickLabelProps:function(e,t){return{dy:"0.25em",textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"rgba(255,255,255,0.9)"}},tickStroke:"rgba(255,255,255,0.3)",tickTextFill:"rgba(255,255,255,0.3)"}))))))}var xe=a(4),Te=$()(J.a),Ae=[{accessor:"companyName",Cell:function(e){return null==e.value?"...":e.value},Header:"Name",headerClassName:"text-left"},{accessor:"symbol",Cell:function(e){return l.createElement(r.b,{to:"/stocks/".concat(e.value)},e.value)},Header:"Symbol",headerClassName:"text-left"},{accessor:"type",Header:"Type",headerClassName:"text-left"},{accessor:"date",Cell:function(e){return l.createElement("time",null,e.value)},Header:"Date",headerClassName:"text-left"},{accessor:"shares",Cell:function(e){return l.createElement("div",{className:"text-right"},null==e.value?"...":z.format(e.value))},Header:"Shares",headerClassName:"text-right"},{accessor:"price",Cell:function(e){return l.createElement("div",{className:"text-right"},null==e.value?"...":U.format(e.value))},Header:"Price",headerClassName:"text-right"},{accessor:"commission",Cell:function(e){return l.createElement("div",{className:"text-right"},null==e.value?"...":U.format(e.value))},Header:"Commission",headerClassName:"text-right"}],Ie=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleDeleteSelectedTransactions=function(){var e=n.props.transactions.filter((function(e){return n.state.selectedTransactionIds.has(e.id)}));n.props.dispatch({transactions:e,type:"DELETE_TRANSACTIONS"})},n.handlePageSizeChange=function(e){n.props.dispatch(y(e))},n.handleToggleAllTransactionIds=function(e){n.isAllTransactionIdsSelected()?n.setState({selectedTransactionIds:new Set}):n.setState({selectedTransactionIds:new Set(n.props.transactions.map((function(e){return e.id})))})},n.handleToggleTransactionIdSelected=function(e){n.isTransactionIdSelected(e)?n.state.selectedTransactionIds.delete(e):n.state.selectedTransactionIds.add(e),n.forceUpdate()},n.isAllTransactionIdsSelected=function(){return n.state.selectedTransactionIds.size===n.props.transactions.length},n.isTransactionIdSelected=function(e){return n.state.selectedTransactionIds.has(e)},n.state={selectedTransactionIds:new Set},n}return Object(u.a)(a,null,[{key:"getDerivedStateFromProps",value:function(e,t){var a,n=!1,l=new Set(e.transactions),s=new Set,r=Object(L.a)(t.selectedTransactionIds);try{for(r.s();!(a=r.n()).done;){var o=a.value;l.has(o)?s.add(o):n=!0}}catch(c){r.e(c)}finally{r.f()}return n?{selectedTransactionIds:s}:null}}]),Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.transactions.map((function(t){var a=e.props.quotes[t.symbol];return Object(xe.a)(Object(xe.a)({},t),{},{companyName:null==a?null:a.companyName})})),a=0===this.props.transactions.length||0===this.state.selectedTransactionIds.size;return l.createElement(W,{deleteDisabled:a,onDelete:this.handleDeleteSelectedTransactions},l.createElement(c.q,{className:"mb-3"},l.createElement(c.b,null,l.createElement(Te,{columns:Ae,data:t,defaultSorted:[{desc:!1,id:"symbol"}],getPaginationProps:function(){return{className:"pt-2",NextComponent:function(e){return l.createElement(c.a,Object.assign({className:"btn-sm",outline:!0},e))},PreviousComponent:function(e){return l.createElement(c.a,Object.assign({className:"btn-sm",outline:!0},e))},showPageJump:!1}},isSelected:this.isTransactionIdSelected,keyField:"id",noDataText:"No transactions yet. Add one using the form below.",onPageSizeChange:this.handlePageSizeChange,pageSize:this.props.appSettings.pageSize,selectAll:this.isAllTransactionIdsSelected(),selectType:"checkbox",toggleAll:this.handleToggleAllTransactionIds,toggleSelection:this.handleToggleTransactionIdSelected}))))}}]),a}(l.Component),je=Object(T.b)((function(e){return{appSettings:e.appSettings,quotes:e.quotes,transactions:e.transactions}}))(Ie);function Fe(){var e=Object(T.c)();return l.useEffect((function(){e(v())}),[e]),l.createElement(r.a,null,l.createElement("div",null,l.createElement(o.a,{component:D}),l.createElement(o.a,{exact:!0,path:"/",component:le}),l.createElement(o.a,{path:"/performance",component:ie}),l.createElement(o.a,{path:"/stocks/:symbol",component:Ne}),l.createElement(o.a,{path:"/transactions",component:je}),l.createElement("footer",{className:"bg-light py-4"},l.createElement(c.d,null,l.createElement(c.q,null,l.createElement(c.b,null,l.createElement("small",{className:"text-secondary"},"Created by Ross Allen <",l.createElement("a",{className:"link-secondary",href:"https://github.com/ssorallen"},"ssorallen"),">"," ",l.createElement("span",{"aria-label":"",role:"img"},"\ud83e\udd89")))),l.createElement(c.q,null,l.createElement(c.b,null,l.createElement("small",{className:"text-secondary"},"Source available at"," ",l.createElement("a",{className:"link-secondary",href:"https://github.com/ssorallen/finance"},"ssorallen/finance")))),l.createElement(c.q,null,l.createElement(c.b,null,l.createElement("small",{className:"text-secondary"},"Data provided by"," ",l.createElement("a",{className:"link-secondary",href:"https://iexcloud.io"},"IEX Cloud"))))))))}var we=a(24),_e=a.n(we),ke=a(87),Pe=a.n(ke),De=a(46),Le=a(88),He=a.n(Le),Re=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Me(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ue=a(89),ze=document.getElementById("root");if(null==ze)throw new Error("Missing element #root to render app");var qe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||n.c,Be=Object(n.d)((function(e,t){switch(t.type){case"ADD_SYMBOL":var a=-1===e.symbols.indexOf(t.symbol)?[].concat(Object(De.a)(e.symbols),[t.symbol]):e.symbols;return Object(xe.a)(Object(xe.a)({},e),{},{symbols:a});case"ADD_TRANSACTION":var n=-1===e.symbols.indexOf(t.transaction.symbol)?[].concat(Object(De.a)(e.symbols),[t.transaction.symbol]):e.symbols;return Object(xe.a)(Object(xe.a)({},e),{},{nextTransactionId:e.nextTransactionId+1,symbols:n,transactions:[].concat(Object(De.a)(e.transactions),[Object(xe.a)(Object(xe.a)({},t.transaction),{},{id:e.nextTransactionId})])});case"ADD_TRANSACTIONS":var l=new Set(e.symbols),s=e.nextTransactionId,r=t.transactions.map((function(e){l.add(e.symbol);var t=Object(xe.a)(Object(xe.a)({},e),{},{id:s});return s+=1,t}));return Object(xe.a)(Object(xe.a)({},e),{},{nextTransactionId:s,symbols:Array.from(l),transactions:e.transactions.concat(r)});case"CHANGE_PAGE_SIZE":return Object(xe.a)(Object(xe.a)({},e),{},{appSettings:Object(xe.a)(Object(xe.a)({},e.appSettings),{},{pageSize:t.pageSize})});case"DELETE_PORTFOLIO":return Object(xe.a)(Object(xe.a)({},e),{},{nextTransactionId:1,symbols:[],transactions:[]});case"DELETE_SYMBOLS":var o=t.symbols;return Object(xe.a)(Object(xe.a)({},e),{},{symbols:e.symbols.filter((function(e){return-1===o.indexOf(e)}))});case"DELETE_TRANSACTIONS":var c=t.transactions;return Object(xe.a)(Object(xe.a)({},e),{},{transactions:e.transactions.filter((function(e){return-1===c.indexOf(e)}))});case"DOWNLOAD_PORTFOLIO":var i=document.body;if(null==i)throw new Error("How in the hell did we get here?");var u=He()((p=e.transactions,f=e.quotes,p.map((function(e){return{"Cash value":null==e.cashValue?"":"".concat(e.cashValue),Commission:"".concat(e.commission),Date:null==e.date?"":e.date,Name:null==f[e.symbol]?"":f[e.symbol].companyName,Notes:null==e.notes?"":e.notes,Price:"".concat(e.price),Shares:"".concat(e.shares),Symbol:e.symbol,Type:e.type}}))),{columns:["Symbol","Name","Type","Date","Shares","Price","Cash value","Commission","Notes"],header:!0}),m=new Blob([u],{type:"text/csv"}),d=document.createElement("a"),h=URL.createObjectURL(m);return d.download="My Portfolio.csv",d.href=h,d.style.display="none",i.appendChild(d),d.click(),URL.revokeObjectURL(h),e;case"FETCH_ALL_IEX_SYMBOLS_FAILURE":return Object(xe.a)(Object(xe.a)({},e),{},{isFetchingAllIexSymbols:!1});case"FETCH_ALL_IEX_SYMBOLS_REQUEST":return Object(xe.a)(Object(xe.a)({},e),{},{isFetchingAllIexSymbols:!0});case"FETCH_ALL_IEX_SYMBOLS_SUCCESS":return Object(xe.a)(Object(xe.a)({},e),{},{allIexSymbols:t.allIexSymbols,isFetchingAllIexSymbols:!1});case"FETCH_SYMBOL_DATA_REQUEST":return Object(xe.a)(Object(xe.a)({},e),{},{isFetchingCount:e.isFetchingCount+1});case"FETCH_SYMBOL_DATA_FAILURE":return Object(xe.a)(Object(xe.a)({},e),{},{isFetchingCount:e.isFetchingCount-1});case"FETCH_SYMBOL_DATA_SUCCESS":return Object(xe.a)(Object(xe.a)({},e),{},{charts:Object(xe.a)(Object(xe.a)({},e.charts),{},{[t.symbol]:t.symbolData.chart}),isFetchingCount:e.isFetchingCount-1,quotes:Object(xe.a)(Object(xe.a)({},e.quotes),{},{[t.symbol]:t.symbolData.quote})});case"FETCH_QUOTES_FAILURE":return Object(xe.a)(Object(xe.a)({},e),{},{fetchErrorMessage:t.error.message,isFetchingCount:e.isFetchingCount-1});case"FETCH_QUOTES_REQUEST":return Object(xe.a)(Object(xe.a)({},e),{},{fetchErrorMessage:null,isFetchingCount:e.isFetchingCount+1});case"FETCH_QUOTES_SUCCESS":return Object(xe.a)(Object(xe.a)({},e),{},{isFetchingCount:e.isFetchingCount-1,quotes:t.quotes,updatedAt:Date.now()});case"SET_IEX_API_KEY":return Object(xe.a)(Object(xe.a)({},e),{},{iexApiKey:t.iexApiKey});default:return e}var p,f}),{allIexSymbols:null,appSettings:{pageSize:10},charts:{},fetchErrorMessage:null,iexApiKey:"",isFetchingAllIexSymbols:!1,isFetchingCount:0,nextTransactionId:1,quotes:{},symbols:[],transactions:[],updatedAt:null},qe(Object(n.a)(Ue.a),Pe()(["allIexSymbols","appSettings","iexApiKey","nextTransactionId","quotes","symbols","transactions","updatedAt"],{key:"default"})));_e.a.render(s.a.createElement(T.a,{store:Be},s.a.createElement(Fe,null)),ze),function(){if("serviceWorker"in navigator){if(new URL("/finance",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/finance","/service-worker.js");Re?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Me(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Me(e)}))}}()},94:function(e,t,a){e.exports=a(246)},97:function(e,t,a){},99:function(e,t,a){}},[[94,1,2]]]);
//# sourceMappingURL=main.27e68efe.chunk.js.map